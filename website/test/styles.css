:root{
  --accent: #0b63ff;
  --bg: #f7f8fb;
  --nav-height: 56px;
  --accordion-transition: 240ms cubic-bezier(.4,0,.2,1);
}

*{ box-sizing: border-box; }
html,body{ height:100%; margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:#111; -webkit-font-smoothing:antialiased;}

/* Prevent horizontal scroll from header nav */
.site-header{
  height: var(--nav-height);
  display:flex;
  align-items:center;
  gap:0.75rem;
  padding:0 1rem;
  background: #fff;
  border-bottom: 1px solid rgba(0,0,0,0.06);
  position:relative;
  /* IMPORTANT: prevent horizontal overflow */
  overflow-x: hidden;
  z-index: 20;
}

/* Brand */
.brand{ font-weight:700; font-size:1.05rem; margin-right:0.75rem; flex: 0 0 auto; }

/* Nav - container flex to hold primary and toggle */
.nav{
  display:flex;
  align-items:center;
  gap:0.5rem;
  flex: 1 1 auto;
  min-width: 0; /* enables child truncation/overflow detection */
  position:relative;
}

/* Primary inline nav - horizontal row of links */
.nav-primary{
  display:flex;
  gap:0.5rem;
  align-items:center;
  white-space:nowrap; /* keep each button as single unit for proper measurement */
  overflow: visible;  /* measurement uses scrollWidth/clientWidth */
  min-width: 0; /* important so clientWidth shrinks on small screens */
  flex: 1 1 auto;
}

/* Link style */
.nav-link{
  text-decoration:none;
  color:inherit;
  padding:0.5rem 0.6rem;
  border-radius:6px;
  font-weight:600;
  flex: 0 0 auto; /* don't stretch */
}
.nav-link:focus,
.nav-link:hover{ background: rgba(11,99,255,0.06); color:var(--accent); }

/* Nav toggle (hamburger) */
.nav-toggle{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:0.5rem;
  font-size:1.25rem;
  height:40px;
  width:40px;
  border-radius:8px;
  border: none;
  background: transparent;
  cursor: pointer;
  flex: 0 0 auto;
}

/* Dropdown / accordion panel â€” default collapsed and visually hidden.
   It stays detached from the header (position:fixed) so it won't be clipped.
   The panel will only expand when the .open class is added in JS. */
.nav-overflow,
.nav-accordion {
  position: fixed;                 /* detach from header's containing block */
  top: calc(var(--nav-height) + 8px);
  right: 1rem;
  left: 1rem;
  z-index: 9999;
  background: white;
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
  border-radius: 8px;
  padding: 0.25rem;
  overflow: hidden;                /* keep collapsed when closed */
  max-height: 0;                   /* collapsed */
  opacity: 0;
  pointer-events: none;
  transition:
    max-height var(--accordion-transition),
    opacity 160ms linear;
}

/* Open state: expand (acts like an accordion). We use a large max-height so the
   panel can grow to fit content. If content is extremely long, internal elements
   can still scroll (see .nav-overflow-list). */
.nav-overflow.open,
.nav-accordion.open {
  max-height: 1000px; /* large enough to fit typical nav lists */
  opacity: 1;
  pointer-events: auto;
}

/* Storage list (used by balancing code). This is the VISIBLE menu:
   it contains the overflowed/missing items and is scrollable if very tall. */
.nav-overflow-list{
  background: white;
  border-radius: 8px;
  padding: 0.5rem;
  display:flex;
  flex-direction: column;
  gap: 0.25rem;
  min-width: 160px;

  max-height: calc(100vh - var(--nav-height) - 24px);
  overflow: auto;
  -webkit-overflow-scrolling: touch;
}

/* Display menu (unused duplicate) kept hidden to avoid double menus */
.nav-overflow-menu{
  display: none;
}

/* Overflowed items are presented like nav links */
.nav-overflow-list .nav-link{
  display:block;
  padding:0.6rem 0.75rem;
  border-radius:6px;
}

/* Small screen aesthetics: group overflow/menu */
@media (max-width: 520px){
  .nav-overflow{
    right: 0.5rem;
    left: 0.5rem;
  }
}

/* Desktop: hide hamburger as an aesthetic fallback (JS controls real visibility) */
@media (min-width: 900px){
  .nav-toggle{ display:none; }
}